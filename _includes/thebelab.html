<!-- Include Thebelab for interactive code if it's enabled -->
<script type="text/x-thebe-config">
    {
        // Whether thebelab should automatically trigger the bootstrap upon page load
        // if set to false, the page should contain some additional javascript
        // responsible for triggering the javascript when desired (e.g. connected to a button click).
        bootstrap: true,
      
        // arbitrary pre-render function called as part of bootstrap
        preRenderHook: false,
      
        // Whether to request the kernel immediately when thebelab is bootstrapped
        // instead of on executing code for the first time
        requestKernel: true,
      
        // Whether thebelab should look for predefined output of cells before execution
        // If this option is enabled and the next div after the cell has the attribute
        // data-output=true (default), then the content of this div is rendered as output
        predefinedOutput: true,
      
        // The selector for identifying whether an element should be treated as output
        outputSelector: '[data-output]'
      
        // Options for requesting a notebook server from mybinder.org
        binderOptions: {
          repo: "tacos-de-datos/tacos-en-jupyter",
          ref: "master",
          binderUrl: "https://mybinder.org",
          // select repository source (optional). Supports Github(default), Gitlab, and Git
          repoProvider: "github",
        },
      
        // Options for requesting a kernel from the notebook server
        kernelOptions: {
          name: "{% if page.kernel_name %}{{ page.kernel_name }}{% else %}python3{% endif %}",
          // notebook server configuration; not needed with binder
          // serverSettings: {
          //       "baseUrl": "http://127.0.0.1:8888",
          //      "token": "test-secret"
          //    }
        },
      
        // Selector for identifying which elements on the page should
        // be made interactive
        selector: "[data-executable]",
      
        // Optional prompt handling during the rendering phase
        // Either false or a dictionary as in the example below
        stripPrompts: false,
        // stripPrompts: {
        //      inPrompt: 'sage: ',
        //      continuationPrompt: '....: ',
        //      // only apply the prompt stripping to cells matching this selector (optional)
        //      selector: '.sage-input',
        //    },
      
        // URL from which to load mathjax
        // set to `false` to disable mathjax
        mathjaxUrl: "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js",
      
        // mathjax configuration string
        mathjaxConfig: "TeX-AMS_CHTML-full,Safe",
      
        // Additional options to pass to CodeMirror instances
        codeMirrorConfig: {},
      }
</script>
<script src="https://unpkg.com/thebelab@0.3.3/lib/index.js"></script>
<script>
// Functions for the thebe activate button and status field

function thebe_place_activate_button(){
  $('.thebe_status_field')
    .html('<input type="button"\
                  onclick="thebe_activate_button_function()"\
                  value="Activate"\
                  title="ThebeLab (requires internet):\nClick to activate code cells in this page.\nYou can then edit and run them.\nComputations courtesy of mybinder.org."\
                   class="thebe-status-field"/>');
}

function thebe_remove_activate_button(){
  $('.thebe_status_field').empty();
}

function thebe_place_status_field(){
  $('.thebe_status_field')
    .html('<span class="thebe-status-field"\
                title="ThebeLab status.\nClick `run` to execute code cells.\nComputations courtesy of mybinder.org.">\
          </span>');
}

function thebe_activate_cells(){
  // Download thebe
  thebelab.on("status", function(evt, data) {
    console.log("Status changed:", data.status, data.message);
    $(".thebe-status-field")
      .attr("class", "thebe-status-field thebe-status-" + data.status)
      .text(data.status);
  });
  thebelab.bootstrap();
}

// Activate button function hook
function thebe_activate_button_function(){
  // Load the Thebe library
  $.getScript("https://unpkg.com/thebelab@^0.3.0")
    .done(function(script, textStatus) {
      thebe_remove_activate_button();
      thebe_place_status_field();
      thebe_activate_cells();
    })
    .fail(function(jqxhr, settings, exception ) {
      $( "div.log" ).text( "Could not fetch ThebeLab library." );
    });
}</script>

<!-- stylesheet -->
<style>
.thebe-status-field {
    background-color: #ccc;
    margin: auto;
    padding: 8px;
  }
  
  .thebe-status-field.thebe-status-building {
    /* Binder is building the image */
    background-color: yellow;
  }
  
  .thebe-status-field.thebe-status-launching {
    /* Binder launching the server */
    background-color: yellow;
  }
  
  .thebe-status-field.thebe-status-starting {
    /* Binder starting the server */
    background-color: yellow;
  }
  
  .thebe-status-field.thebe-status-ready {
    /* The kernel is connected and ready */
    background-color: lightgreen;
  }
  
  .thebe-status-field.thebe-status-failed {
    /* Building the image or launching the kernel failed */
    background-color: red;
  }
  
  .thebe-status-field.thebe-status-busy {
    /* The kernel is busy (this event is not hooked up yet) */
    background-color: yellow;
  }
</style>